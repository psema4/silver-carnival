(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var moverSystem=require("../systems/moverSystem");function Moveable(entity){this.entity=entity;moverSystem.register(this)}Moveable.prototype.invoke=function(){var entity=this.entity;if(!entity.isActive)return;entity.x+=entity.xSpeed;entity.y+=entity.ySpeed};module.exports=Moveable},{"../systems/moverSystem":7}],2:[function(require,module,exports){var renderSystem=require("../systems/renderSystem");function Renderable(entity){this.entity=entity;renderSystem.register(this)}Renderable._types={rectangle:function(opts){opts=opts||{};var projectedX=opts.entity.x*opts.viewport.width,projectedY=opts.entity.y*opts.viewport.height,projectedWidth=opts.entity.width*opts.viewport.width,projectedHeight=opts.entity.height*opts.viewport.height;opts.context.fillRect(projectedX,projectedY,projectedWidth,projectedHeight)},circle:function(opts){opts=opts||{};var projectedX=opts.entity.x*opts.viewport.width,projectedY=opts.entity.y*opts.viewport.height,projectedRadius=opts.entity.radius*opts.viewport.width;opts.context.beginPath();opts.context.arc(projectedX,projectedY,projectedRadius,0,Math.PI*2);opts.context.fill()},geometry:function(opts){opts=opts||{};var geometry=opts.entity;opts.context.beginPath();[].forEach.call(geometry,function(point){opts.context.lineTo(point.x*opts.viewport.width,point.y*opts.viewport.height)});opts.context.fill()},surface:function(){}};Renderable._fillStyles={colour:function(opts){opts=opts||{};opts.context.fillStyle=opts.fillStyle.colour},gradient:function(opts){opts=opts||{};var projectedX=opts.entity.x*opts.viewport.width,projectedY=opts.entity.y*opts.viewport.height,projectedHeight=opts.entity.height*opts.viewport.height,gradient=opts.context.createLinearGradient(projectedX,projectedY,projectedX,projectedY+projectedHeight);gradient.addColorStop(0,opts.fillStyle.firstStep);gradient.addColorStop(1,opts.fillStyle.secondStep);opts.context.fillStyle=gradient},pattern:function(opts){opts=opts||{};var pattern=opts.context.createPattern(opts.fillStyle.source,"repeat");opts.context.fillStyle=pattern},drawable:function(opts){opts=opts||{};opts.fillStyle.draw(opts)}};Renderable._clearContext=function(opts){opts=opts||{};var projectedX=entity.x*viewport.width,projectedY=entity.y*viewport.height,projectedWidth=entity.width*viewport.width,projectedHeight=entity.height*viewport.height;opts.context.clearRect(projectedX,projectedY,projectedWidth,projectedHeight)};Renderable.prototype.invoke=function(context,viewport){var entity=this.entity,renderOpts=entity.renderOpts;if(!entity.isActive)return;Renderable._fillStyles[renderOpts.fillStyle.type]({entity:entity,fillStyle:renderOpts.fillStyle,context:context,viewport:viewport});Renderable._types[renderOpts.type]({entity:entity,context:context,viewport:viewport})};module.exports=Renderable},{"../systems/renderSystem":8}],3:[function(require,module,exports){var Renderable=require("../components/Renderable"),Moveable=require("../components/Moveable"),x=0,y=0,SPEED=.004,RADIUS=.02;function Ball(){this.isActive=true;this.x=x;this.y=y;this.radius=RADIUS;this.xSpeed=SPEED;this.ySpeed=SPEED;this.renderOpts={type:"circle",fillStyle:{type:"colour",colour:"black"}};new Renderable(this);new Moveable(this)}module.exports=Ball},{"../components/Moveable":1,"../components/Renderable":2}],4:[function(require,module,exports){var Renderable=require("../components/Renderable"),Moveable=require("../components/Moveable"),x=0,y=0,SPEED=.0025,WIDTH=.5,HEIGHT=.5;function Pacman(){this.isActive=true;this.x=x;this.y=y;this.width=WIDTH;this.height=HEIGHT;this.xSpeed=SPEED;this.ySpeed=SPEED;this.renderOpts={type:"surface",fillStyle:{type:"drawable",draw:function(opts){if(opts.context){var ctx=opts.context,vp=opts.viewport,x=opts.entity.x*vp.width-opts.entity.width/2,y=opts.entity.y*vp.height-opts.entity.height/2;ctx.beginPath();ctx.arc(x+37,y+37,13,Math.PI/7,-Math.PI/7,false);ctx.lineTo(x+31,y+37);ctx.fill()}}}};new Renderable(this);new Moveable(this)}module.exports=Pacman},{"../components/Moveable":1,"../components/Renderable":2}],5:[function(require,module,exports){var Ball=require("./entities/Ball"),Pacman=require("./entities/Pacman"),pool={};module.exports={get:function(key){return pool[key]},create:function(){pool.ball=new Ball;pool.pacman=new Pacman}}},{"./entities/Ball":3,"./entities/Pacman":4}],6:[function(require,module,exports){var outbrk=function(opts){opts=opts||{};var objectPool=opts.objectPool||require("./objectPool"),renderSystem=require("./systems/renderSystem"),moverSystem=require("./systems/moverSystem"),$=function(sel){return document.querySelector(sel)},$$=function(sel){return document.querySelectorAll(sel)},$canvas=$("canvas"),ctx2d=$canvas.getContext("2d"),viewport={width:$canvas.width,height:$canvas.height};if(renderSystem.init({context:ctx2d,viewport:viewport})){moverSystem.init();objectPool.create();window.objectPool=objectPool;function gameloop(){ctx2d.clearRect(0,0,viewport.width,viewport.height);moverSystem.invoke();renderSystem.invoke();requestAnimationFrame(gameloop)}gameloop()}else{console.warn("outbrk: unable to initialize")}};module.exports=outbrk},{"./objectPool":5,"./systems/moverSystem":7,"./systems/renderSystem":8}],7:[function(require,module,exports){module.exports={init:function(){this.components=[];console.log("moverSystem initialized")},register:function(component){this.components.push(component);console.log("moverSystem: registered component:",component)},invoke:function(){[].forEach.call(this.components,function(component){component.invoke()})}}},{}],8:[function(require,module,exports){module.exports={init:function(opts){if(!opts||!opts.context||!opts.viewport){console.warn("render system failed to initialize, a context & viewport are required");return false}this.components=[];this.context=opts.context;this.viewport=opts.viewport;console.log("renderSystem initialized, using context & viewport:",this.context,this.viewport);return true},register:function(component){this.components.push(component);console.log("renderSystem: registered component:",component)},invoke:function(){var context=this.context,viewport=this.viewport;[].forEach.call(this.components,function(component){component.invoke(context,viewport)})}}},{}],9:[function(require,module,exports){var Renderable=require("../../outbrk/src/components/Renderable"),Moveable=require("../../outbrk/src/components/Moveable"),x=0,y=0,SPEED=.004,RADIUS=.02;function Ball(){this.isActive=true;this.x=x;this.y=y;this.radius=RADIUS;this.xSpeed=SPEED;this.ySpeed=SPEED;this.renderOpts={type:"circle",fillStyle:{type:"colour",colour:"red"}};new Renderable(this);new Moveable(this)}module.exports=Ball},{"../../outbrk/src/components/Moveable":1,"../../outbrk/src/components/Renderable":2}],10:[function(require,module,exports){var Renderable=require("../../outbrk/src/components/Renderable"),Moveable=require("../../outbrk/src/components/Moveable"),x=1,y=0,SPEED=.002,WIDTH=.125,HEIGHT=.125;function Box(){this.isActive=true;this.x=x;this.y=y;this.width=WIDTH;this.height=HEIGHT;this.xSpeed=-1*SPEED;this.ySpeed=SPEED;this.renderOpts={type:"rectangle",fillStyle:{type:"colour",colour:"blue"}};new Renderable(this);new Moveable(this)}module.exports=Box},{"../../outbrk/src/components/Moveable":1,"../../outbrk/src/components/Renderable":2}],11:[function(require,module,exports){var Renderable=require("../../outbrk/src/components/Renderable"),Moveable=require("../../outbrk/src/components/Moveable"),x=0,y=0,SPEED=.004,WIDTH=.5,HEIGHT=.5;function Pacman(){this.isActive=true;this.x=x;this.y=y;this.width=WIDTH;this.height=HEIGHT;this.xSpeed=SPEED;this.ySpeed=SPEED;this.renderOpts={type:"surface",fillStyle:{type:"drawable",draw:function(opts){if(opts.context){var ctx=opts.context,_fillStyle=ctx.fillStyle,vp=opts.viewport,x=opts.entity.x*vp.width-opts.entity.width/2,y=opts.entity.y*vp.height-opts.entity.height/2;ctx.fillStyle="black";roundedRect(ctx,x+12,y+12,190,180,15);roundedRect(ctx,x+19,y+19,175,165,9);roundedRect(ctx,x+53,y+53,49,33,10);roundedRect(ctx,x+53,y+119,49,16,6);roundedRect(ctx,x+135,y+53,49,33,10);roundedRect(ctx,x+135,y+119,25,49,10);ctx.fillStyle="yellow";ctx.beginPath();ctx.arc(x+37,y+37,13,Math.PI/7,-Math.PI/7,false);ctx.lineTo(x+31,y+37);ctx.fill();ctx.fillStyle="#AAAAAA";for(var i=0;i<8;i++){ctx.fillRect(x+51+i*16,y+34,4,4)}for(i=0;i<6;i++){ctx.fillRect(x+115,y+51+i*16,4,4)}for(i=0;i<8;i++){ctx.fillRect(x+51+i*16,y+99,4,4)}ctx.fillStyle="red";ctx.beginPath();ctx.moveTo(x+83,y+116);ctx.lineTo(x+83,y+102);ctx.bezierCurveTo(x+83,y+94,x+89,y+88,x+97,y+88);ctx.bezierCurveTo(x+105,y+88,x+111,y+94,x+111,y+102);ctx.lineTo(x+111,y+116);ctx.lineTo(x+106.333,y+111.333);ctx.lineTo(x+101.666,y+116);ctx.lineTo(x+97,y+111.333);ctx.lineTo(x+92.333,y+116);ctx.lineTo(x+87.666,y+111.333);ctx.lineTo(x+83,y+116);ctx.fill();ctx.fillStyle="white";ctx.beginPath();ctx.moveTo(x+91,y+96);ctx.bezierCurveTo(x+88,y+96,x+87,y+99,x+87,y+101);ctx.bezierCurveTo(x+87,y+103,x+88,y+106,x+91,y+106);ctx.bezierCurveTo(x+94,y+106,x+95,y+103,x+95,y+101);ctx.bezierCurveTo(x+95,y+99,x+94,y+96,x+91,y+96);ctx.moveTo(x+103,y+96);ctx.bezierCurveTo(x+100,y+96,x+99,y+99,x+99,y+101);ctx.bezierCurveTo(x+99,y+103,x+100,y+106,x+103,y+106);ctx.bezierCurveTo(x+106,y+106,x+107,y+103,x+107,y+101);ctx.bezierCurveTo(x+107,y+99,x+106,y+96,x+103,y+96);ctx.fill();ctx.fillStyle="black";ctx.beginPath();ctx.arc(x+101,y+102,2,0,Math.PI*2,true);ctx.fill();ctx.beginPath();ctx.arc(x+89,y+102,2,0,Math.PI*2,true);ctx.fill();ctx.fillStyle=_fillStyle}function roundedRect(ctx,x,y,width,height,radius){ctx.beginPath();ctx.moveTo(x,y+radius);ctx.lineTo(x,y+height-radius);ctx.arcTo(x,y+height,x+radius,y+height,radius);ctx.lineTo(x+width-radius,y+height);ctx.arcTo(x+width,y+height,x+width,y+height-radius,radius);ctx.lineTo(x+width,y+radius);ctx.arcTo(x+width,y,x+width-radius,y,radius);ctx.lineTo(x+radius,y);ctx.arcTo(x,y,x,y+radius,radius);ctx.stroke()}}}};new Renderable(this);new Moveable(this)}module.exports=Pacman},{"../../outbrk/src/components/Moveable":1,"../../outbrk/src/components/Renderable":2}],12:[function(require,module,exports){var Ball=require("./entities/Ball"),Box=require("./entities/Box"),Pacman=require("./entities/Pacman"),pool={};module.exports={get:function(key){return pool[key]},create:function(){pool.ball=new Ball;pool.box=new Box;pool.pacman=new Pacman}}},{"./entities/Ball":9,"./entities/Box":10,"./entities/Pacman":11}],13:[function(require,module,exports){var outbrk=require("../outbrk/src/outbrk"),objectPool=require("./objectPool");window.addEventListener("load",function(){console.log("load");window.game=new outbrk({objectPool:objectPool})})},{"../outbrk/src/outbrk":6,"./objectPool":12}]},{},[13]);
